'use strict';const WHATSAPP_NUMBER='573052064654',WHATSAPP_MESSAGE='Hola, me gustaría reservar una consultoría personalizada con Outrun AI',BOOKING_URL='#contacto';function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}function throttle(e,t){let n;return function(...o){n||(e(...o),n=!0,setTimeout(()=>n=!1,t))}}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function validatePhone(e){return/^(\+57)?[\s.-]?3[0-9]{2}[\s.-]?[0-9]{3}[\s.-]?[0-9]{4}$/.test(e.replace(/\s/g,''))}function showMessage(e,t){document.querySelectorAll('.message').forEach(e=>e.remove());const n=document.createElement('div');n.className=`message message-${e}`,n.textContent=t,n.setAttribute('role','alert');const o=document.querySelector('main');o&&(o.insertBefore(n,o.firstChild),setTimeout(()=>{n.remove()},5e3))}function initLazyLoading(){const e=document.querySelectorAll('img[data-src]');if('IntersectionObserver'in window){const t=new IntersectionObserver((e,n)=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target;o.src=o.dataset.src,o.removeAttribute('data-src'),n.unobserve(o)}})},{rootMargin:'50px 0px',threshold:.01});e.forEach(e=>t.observe(e))}else e.forEach(e=>{e.src=e.dataset.src,e.removeAttribute('data-src')})}function initMobileMenu(){const e=document.querySelector('.menu-toggle'),t=document.querySelector('.mobile-nav');e&&t&&(e.addEventListener('click',()=>{const n='true'===e.getAttribute('aria-expanded');e.setAttribute('aria-expanded',!n),t.classList.toggle('is-open'),document.body.classList.toggle('menu-open')}),document.addEventListener('click',n=>{e.contains(n.target)||t.contains(n.target)||(e.setAttribute('aria-expanded','false'),t.classList.remove('is-open'),document.body.classList.remove('menu-open'))}),t.querySelectorAll('a').forEach(n=>{n.addEventListener('click',()=>{e.setAttribute('aria-expanded','false'),t.classList.remove('is-open'),document.body.classList.remove('menu-open')})}))}function initSmoothScroll(){const e=document.querySelector('header')?.offsetHeight||0;document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener('click',function(t){const n=this.getAttribute('href');if('#'===n)return;const o=document.querySelector(n);if(o){t.preventDefault();const r=o.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:r,behavior:'smooth'}),history.pushState(null,null,n)}})})}function updateActiveNavLink(){const e=document.querySelectorAll('section[id]'),t=document.querySelectorAll('.nav-links a, .mobile-nav a');if(0===e.length||0===t.length)return;const n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target.getAttribute('id');t.forEach(e=>{e.removeAttribute('aria-current')}),t.forEach(e=>{e.getAttribute('href')===`#${n}`&&e.setAttribute('aria-current','page')})}})},{root:null,rootMargin:'-20% 0px -80% 0px',threshold:0});e.forEach(e=>{n.observe(e)})}window.addEventListener('error',e=>{});window.addEventListener('load',()=>{});function initConsultationBooking(){const e=document.getElementById('btn-whatsapp'),t=document.getElementById('btn-reservar');e&&e.addEventListener('click',function(e){e.preventDefault();const t=encodeURIComponent(WHATSAPP_MESSAGE);window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${t}`,'_blank')}),t&&t.addEventListener('click',function(e){e.preventDefault(),window.location.href=BOOKING_URL});const n=document.querySelector('.pricing-card');n&&'IntersectionObserver'in window&&(new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity='1',e.target.style.transform='translateY(0)')})},{threshold:.2}).observe(n),n.style.opacity='0',n.style.transform='translateY(30px)',n.style.transition='opacity 0.6s ease, transform 0.6s ease')}function initContactForm(){const e=document.getElementById('contact-form');if(!e)return;const t=e.querySelector('.contact-submit'),n=e.querySelector('.form-message'),o={nombre:{validate:e=>e.trim().length>=2,errorMessage:'Por favor ingresa tu nombre completo'},email:{validate:e=>validateEmail(e),errorMessage:'Por favor ingresa un correo electrónico válido'},telefono:{validate:e=>validatePhone(e),errorMessage:'Por favor ingresa un número de teléfono válido (ej: 300 123 4567)'},mensaje:{validate:e=>e.trim().length>=10,errorMessage:'Por favor ingresa un mensaje (mínimo 10 caracteres)'}};function r(t,n){const r=e.querySelector(`#${t}`),s=r.closest('.form-group'),a=e.querySelector(`#${t}-error`);n?(s.classList.add('error'),r.setAttribute('aria-invalid','true'),a.textContent=o[t].errorMessage):(s.classList.remove('error'),r.setAttribute('aria-invalid','false'),a.textContent='')}function s(t){const n=e.querySelector(`#${t}`),s=o[t].validate(n.value);return r(t,!s),s}function a(){let e=!0;return Object.keys(o).forEach(t=>{s(t)||(e=!1)}),e}function i(e,t){n.textContent=e,n.className=`form-message ${t} show`,'success'===t&&setTimeout(()=>{n.classList.remove('show')},5e3)}function c(){n.classList.remove('show')}Object.keys(o).forEach(t=>{const n=e.querySelector(`#${t}`);n.addEventListener('blur',()=>{s(t)}),n.addEventListener('input',()=>{n.closest('.form-group').classList.contains('error')&&s(t),c()})}),e.addEventListener('submit',async function(n){n.preventDefault();const s=e.querySelector('#website');if(s&&s.value)return;if(!a())return void i('Por favor corrige los errores en el formulario.','error');const c=t.textContent;t.disabled=!0,t.textContent='Enviando...';try{const n=new FormData(e),s=await fetch(e.action,{method:'POST',body:n}),a=await s.json();a.success?(i('¡Mensaje enviado exitosamente! Te contactaremos pronto.','success'),e.reset(),Object.keys(o).forEach(e=>{r(e,!1)})):i(a.message||'Hubo un error al enviar el mensaje. Por favor intenta nuevamente.','error')}catch(e){i('Hubo un error al enviar el mensaje. Por favor intenta nuevamente.','error')}finally{t.disabled=!1,t.textContent=c}})}function initTestimonialsCarousel(){const e=document.querySelector('.testimonials-grid');if(!e)return;const t=e.querySelectorAll('.testimonial-card');if(0===t.length)return;let n=0,o=!1,r=null,s=null;function a(){o||(o=!0,e.classList.add('testimonials-carousel'),e.setAttribute('aria-live','polite'),e.setAttribute('aria-label','Carrusel de testimonios'),t.forEach((e,t)=>{e.classList.toggle('active',0===t),e.setAttribute('aria-hidden',0!==t)}),r=document.createElement('button'),r.className='carousel-btn-prev',r.innerHTML='&#8249;',r.setAttribute('aria-label','Testimonio anterior'),r.addEventListener('click',c),s=document.createElement('button'),s.className='carousel-btn-next',s.innerHTML='&#8250;',s.setAttribute('aria-label','Siguiente testimonio'),s.addEventListener('click',l),e.parentElement.style.position='relative',e.parentElement.appendChild(r),e.parentElement.appendChild(s),document.addEventListener('keydown',d),n=0)}function i(){o&&(o=!1,e.classList.remove('testimonials-carousel'),e.removeAttribute('aria-live'),t.forEach(e=>{e.classList.remove('active'),e.removeAttribute('aria-hidden')}),r&&(r.remove(),r=null),s&&(s.remove(),s=null),document.removeEventListener('keydown',d))}function c(){const e=(n-1+t.length)%t.length;u(e)}function l(){const e=(n+1)%t.length;u(e)}function u(e){t.forEach((t,n)=>{const o=n===e;t.classList.toggle('active',o),t.setAttribute('aria-hidden',!o)}),n=e}function d(e){if(!o)return;const n=document.getElementById('testimonios').getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&('ArrowLeft'===e.key?c():'ArrowRight'===e.key&&l())}function m(){window.innerWidth<768?a():i()}m();let f;window.addEventListener('resize',function(){clearTimeout(f),f=setTimeout(m,150)})}function initBackToTop(){const e=document.createElement('button');e.className='back-to-top',e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg><span class="visually-hidden">Volver arriba</span>',e.setAttribute('aria-label','Volver arriba'),e.style.cssText='position:fixed;bottom:2rem;right:2rem;width:48px;height:48px;border-radius:50%;background:var(--primary-color);color:var(--background-light);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity 0.3s ease,visibility 0.3s ease,transform 0.3s ease,background 0.3s ease;z-index:1000;box-shadow:0 4px 12px rgba(0,102,255,0.3)',document.body.appendChild(e);const t=throttle(()=>{(window.scrollY||window.pageYOffset)>400?(e.style.opacity='1',e.style.visibility='visible'):(e.style.opacity='0',e.style.visibility='hidden')},100);window.addEventListener('scroll',t),e.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'})}),e.addEventListener('mouseenter',()=>{e.style.transform='translateY(-3px)',e.style.boxShadow='0 6px 16px rgba(0,102,255,0.4)'}),e.addEventListener('mouseleave',()=>{e.style.transform='translateY(0)',e.style.boxShadow='0 4px 12px rgba(0,102,255,0.3)'})}document.addEventListener('DOMContentLoaded',function(){initLazyLoading(),initMobileMenu(),initSmoothScroll(),updateActiveNavLink(),initConsultationBooking(),initContactForm(),initTestimonialsCarousel(),initBackToTop()});
